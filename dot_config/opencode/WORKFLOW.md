# 開發工作流程

## 回答詳細程度控制

使用者可以透過**前綴關鍵字**或 **Commands** 來精確控制回答的詳細程度。

### 📏 四級回答系統

#### 1️⃣ 極簡模式 (Quick Answer)
**觸發方式**:
- 前綴: `簡答`、`快速`、`簡單說`、`一句話`
- Command: `/q` 或 `/quick`

**回答格式** (1-3 行):
```
答案: {直接回答}
```

**範例**:
```
使用者: "簡答 useState 是什麼?"
Claude: "useState 是 React Hook，用來在函式元件中管理狀態。"
```

---

#### 2️⃣ 簡短模式 (Brief Answer)
**觸發方式**:
- 前綴: `簡短說明`、`簡述`、`概述`
- Command: `/b` 或 `/brief`

**回答格式** (5-10 行):
```
概念: {核心說明}
用途: {主要用途}
範例: {一行範例}
```

**範例**:
```
使用者: "簡述 useEffect"
Claude:
概念: useEffect 處理副作用 (side effects)
用途: 資料獲取、訂閱、手動 DOM 操作
範例: useEffect(() => { fetchData() }, [deps])
```

---

#### 3️⃣ 標準模式 (Standard Answer) - **預設**
**觸發方式**:
- 沒有特殊前綴時的預設模式
- 一般問句: "XXX 是什麼?"、"XXX 和 YYY 差別?"

**回答格式** (15-30 行):
```
## 核心概念
{清楚的說明}

## 實用範例
{簡單的程式碼範例}

## 實際影響
{使用場景和注意事項}
```

---

#### 4️⃣ 深入模式 (Deep Explanation)
**觸發方式**:
- 前綴: `深入`、`詳細`、`完整`、`深層`、`徹底講解`
- Command: `/d` 或 `/deep` 或 `/explain`

**回答格式** (50+ 行):
```
## 📝 概念說明
{完整的概念解釋}

## 💻 實作範例
{基礎範例、進階範例、專案實際用法}

## 🔍 深入原理
{內部運作機制、技術細節}

## ⚠️ 注意事項
{常見陷阱、最佳實踐、效能考量}

## 📚 延伸閱讀
{相關主題、進階內容}
```

---

### 🎯 判斷優先級

```
1. 專業 Agent (dotnet-code-reviewer) → 最高優先 (專業領域審查)
2. 明確 Command (/q, /b, /d)         → 次優先 (明確指定模式)
3. 前綴關鍵字 (簡答、深入)            → 第三優先 (快速切換)
4. 工作模式關鍵字 (建立、分析)        → 第四優先 (情境判斷)
5. 無特殊關鍵字                       → 標準模式
```

**優先級說明**:
- 當使用者要求審查 .NET 程式碼時，優先使用專業 Agent 而非一般分析模式
- 明確的 Command 指令優於關鍵字推測
- 若多個關鍵字衝突，以前面的規則為準

---

## 工作模式

Claude Code 支援多種工作模式,會根據使用者的關鍵字自動選擇:

### 🚀 快速實作模式
**觸發關鍵字**: 建立、實作、新增、修改、產生、Fix
**行為**:
- 直接產生可用的程式碼
- 跳過快取檢查,專注速度
- 提供簡潔的使用說明

### 📚 深度解答模式
**觸發關鍵字**: 深入、詳細、完整、深層、徹底
**行為**:
- 提供完整的概念說明
- 包含實作範例
- 解釋深入原理
- 列出注意事項

### 🔍 深度分析模式
**觸發關鍵字**: 分析、理解、Review、探討、研究
**行為**:
- 多維度分析程式碼
- 建立快取筆記
- 提供優化建議
- 識別潛在問題

### 💡 諮詢建議模式
**觸發關鍵字**: 建議、推薦、應該、選擇、比較
**行為**:
- 提供快速/穩健/理想三種方案
- 比較優缺點
- 給出具體建議

### ❓ 一般問答模式
**預設模式**: 無特定關鍵字時
**行為**:
- 簡潔回答(10-20 行)
- 核心差異說明
- 簡單範例
- 實際影響

## 專案適配

所有輸出都會根據專案類型自動調整:
- **React 專案**: 使用 Hooks、Functional Components、TypeScript
- **.NET 專案**: 遵循 SOLID、DDD、CQRS 原則
- **Vue 專案**: 使用 Composition API
- **Angular 專案**: 依賴注入、RxJS 模式

### Agent 自動選擇

根據專案類型和任務，自動選用對應的專業 Agent:

| 專案類型 | 任務類型 | 使用 Agent | 觸發時機 |
|---------|---------|-----------|---------|
| .NET 9.0 | 程式碼審查 | `dotnet-code-reviewer` | 完成功能實作、重構、明確要求 review |
| React | 程式碼審查 | *(未來擴充)* | - |
| 通用 | 一般分析 | 使用內建分析模式 | `/analyze` 指令或「分析」關鍵字 |

**Agent 觸發原則**:
- 優先使用專業 Agent 進行領域特定的審查
- 若無對應 Agent，退回到工作模式 (深度分析模式)
- 可透過 `/review-{type}` 指令明確觸發特定 Agent

## 快取系統

### 快取位置
```
$USERPROFILE\Documents\Obsidian_Note\Projects\{專案名}\
```

### 快取策略
- **快速實作**: 不使用快取
- **深度解答**: 背景檢查快取
- **深度分析**: 優先使用快取並建立新快取
- **諮詢建議**: 選擇性參考快取

### 快取結構
```
{專案名}/
├── _cache_metadata.json      # 快取索引
├── _project_context.json     # 專案資訊
├── Backend/                  # 後端快取
│   ├── Controllers/
│   ├── Services/
│   └── Models/
└── Frontend/                 # 前端快取
    ├── Components/
    ├── Hooks/
    └── Services/
```
